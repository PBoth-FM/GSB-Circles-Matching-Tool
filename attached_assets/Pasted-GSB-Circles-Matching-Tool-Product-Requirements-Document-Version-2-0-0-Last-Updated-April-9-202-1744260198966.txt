GSB Circles Matching Tool - Product Requirements Document
Version 2.0.0
Last Updated: April 9, 2025

1. Introduction

1.1 Purpose and Objectives
The GSB Circles Matching Tool is a specialized application designed to automate and optimize the creation and management of alumni "circles" - small groups of 5-10 participants who meet regularly. 

The primary goal of the tool is to maximize the total number of matched participants.

Additionally, it must create circles that respect the requirements: matching locations, matching day/time preferences, circle size, host(s).

1.2 Target User
The application is intended for use by GSB (Graduate School of Business) administrative staff and volunteers responsible for organizing and coordinating alumni circles. These users typically have: 
Basic to intermediate technical skills
Detailed knowledge of the alumni circle program
Administrative responsibilities for circle management
Need for efficiency in matching large groups of participants

1.3 Business Context and Value Proposition
The GSB Circles program facilitates ongoing connections between alumni, fostering community and professional relationships. Prior to this tool, the matching process was manual, time-consuming, and often resulted in suboptimal groupings. The value proposition includes:
Reduction in administrative time (from days to minutes)
Improved participant satisfaction through better matching
Increased program scalability
Higher retention through better-aligned circles
Data-driven insights into participant preferences and circle dynamics

1.4 Key Success Metrics
The effectiveness of the tool will be measured by:
Percentage of participants successfully matched (target: >90%)
Time required to perform matching (target: <5 minutes for 500+ participants)
User satisfaction with the tool (target: >85% satisfaction)

2. System Overview

2.1 Data Flow & Processing
The system will process data through several stages to create optimal matches.
The system processes data through the following sequential stages:
1. Data Ingestion (section 3.2)
2. Data Normalization & Cleaning  (section 3.3)
3. Create Initial Derived Fields (section 3.4.2)
4. Matching Algorithm Execution (section 4 through 4.4)
5. Circle Creation and Naming (section 4.5)
6. Determine metadata: unmatched reason codes and circle properties (section 5)
6. Reporting and export (section 6)

2.2 Architecture Overview
The GSB Circles Matching Tool is built as a web-based application using the Streamlit framework. The application consists of:
Frontend: Streamlit-based web interface with responsive design
Core Algorithm: Enhanced matching algorithm using PuLP for optimization
Data Processing: Pandas-based data transformation and cleaning
Visualization: Data visualization using Plotly

2.3 Component Interactions
The components interact in the following manner:
User uploads participant data (CSV format)
Data processor validates, cleans, and normalizes the input
Core algorithm processes the data and generates optimal matches
Results are displayed in the interface and available for export

2.4 Technical Requirements and Dependencies
The application requires:
Python 3.9+ - Base language
Streamlit 1.15+ - Web framework
Pandas 1.4+ - Data processing
PuLP 2.6+ - Optimization library
Plotly 5.10+ - Data visualization

2.5 Performance Considerations
The application should maintain performance under the following conditions:
Up to 3,000 participants in a single matching operation
Up to 100 existing circles to be maintained/modified
Up to 100 concurrent users accessing the application
Response time under 90 seconds for algorithm execution
Total memory usage under 4GB

2.6 Storage and Retention Policies
The application operates primarily with in-memory data processing. The following retention policies apply:
Uploaded data files are not persisted beyond the current session
Session state maintains data during active use
Results can be exported by users for permanent storage
No participant data is stored in persistent storage without explicit user export
Debug logs may be retained for up to 7 days for troubleshooting

3. Data Handling
3.1 Data Sources and Format Requirements
The application accepts participant data in the following formats:
CSV (comma-separated values)

The required format includes specific columns as detailed in section 3.4. Sample data templates will be provided.

3.2 Data Ingestion Process
The data ingestion process follows these steps:
User uploads file via the web interface
System validates file format (CSV)
System performs first-pass validation of required columns
System checks for data integrity issues (duplicate IDs, etc.)
Records with status containing "MOVING OUT" are filtered out
Data is loaded into memory for processing
Initial statistics are displayed to the user (count of records for matching, count of any records filtered out)


3.3 Normalization and Cleaning Procedures
The following automated cleaning procedures are applied:
Participant Status Filtering:
Records with status "MOVING OUT" are excluded from matching
Records with status "Current-CONTINUING" are re-assigned to their existing circles
Records with status any other status (e.g., "NEW to Circles", "NEW to Circles (Waitlist), “Requesting 2nd Circle”, “Current-MOVING INTO Region” and any others) are treated as new participants
Location Normalization:
Region names are normalized - See Appendix 1
Subregion names are normalized - See Appendix 2
Region codes are generated for consistent identification - See Appendix 2
Where the Region is any of (San Diego, Marin County, Nairobi, Sao Paulo, Mexico City, Singapore, Shanghai, Napa/Sonoma, Atlanta) AND first_choice_location is blank, insert Region as first_choice_location
Time Preference Standardization:
Day ranges (e.g., "Monday-Thursday" and “M-Th”) are standardized
Time periods (Mornings, Evenings) are normalized
Virtual meeting timezones are standardized to GMT format
Format: (Do virtual later)
Always try to match a participant to an in-person circle unless their requested_region_from_form starts with “Virtual”
Participants whose requested_region_from_form is NOT “Virtual” AND whose “If Can't Place In-Person, Open to Virtual-Only?” is “Yes” can be matched to a virtual circle.
Host Volunteer Classification:
"Host_Volunteer" values are mapped to standardized categories:
“Always” = “Always” or “Always Host”
“Sometimes” = “Sometimes” or “Sometimes Host”
“Never” = “Never Host”, “n/a” or any other response

3.4 Data Structure
3.4.1 Imported Fields
- field_name: encoded_id
  type: String
  required: Yes
  description: Unique identifier for each participant

- field_name: status
  type: String
  required: Yes
  description: Current status (Current, NEW to Circles, MOVING OUT, etc.)

- field_name: current_circle_id
  type: String
  required: No
  description: Current circle ID (for existing members)

- field_name: current_meeting_day
  type: String
  required: No
  description: Current circle meeting day (for Current-CONTINUING participants)

- field_name: current_meeting_time
  type: String
  required: No
  description: Current circle meeting time (for Current-CONTINUING participants)

- field_name: current_region
  type: String
  required: No
  description: Current geographical region

- field_name: current_subregion
  type: String
  required: No
  description: Current geographical subregion

- field_name: requested_region_from_form
  type: String
  required: No
  description: Specific region requested via application form

- field_name: If Can't Place In-Person, Open to Virtual-Only?
  type: String
  required: No
  description: >
	For participants who requested an in-person circle, in case one cannot be found,
	this allows them to be matched to a virtual circle as a fallback

- field_name: first_choice_location
  type: String
  required: Yes
  description: First choice location preference

- field_name: first_choice_days
  type: String
  required: No
  description: First choice day(s) preference (parsed from time string)

- field_name: first_choice_time
  type: String
  required: Yes
  description: First choice time preference (full string)

- field_name: second_choice_location
  type: String
  required: No
  description: Second choice location preference

- field_name: second_choice_days
  type: String
  required: No
  description: Second choice day(s) preference (parsed from time string)

- field_name: second_choice_time
  type: String
  required: No
  description: Second choice time preference (full string)

- field_name: third_choice_location
  type: String
  required: No
  description: Third choice location preference

- field_name: third_choice_days
  type: String
  required: No
  description: Third choice day(s) preference (parsed from time string)

- field_name: third_choice_time
  type: String
  required: No
  description: Third choice time preference (full string)

- field_name: co_leader_max_new_members
  type: Integer
  required: No
  description: Maximum number of new members requested by co-leader for existing circle

- field_name: host_volunteer
  type: String
  required: No
  description: >
	Willingness to host (“Always”, “Sometimes”, “Sometimes Host”, “Never Host”, “n/a”, blank).
	This is normalized as part of data normalization.

- field_name: leadership_interest
  type: String
  required: No
  description: >
	Interest in being a circle leader (Yes, No, Maybe), among those not currently a circle


3.4.2 Initial Derived Fields

- field_name: current_meeting_day_time
  type: String
  derivation_rule: >
	Normalized combination of current_meeting_day and current_meeting_time,
	in the format of e.g., “Monday (Evenings)”, “M-Th (Evenings)”, “Varies (Varies)”

- field_name: region
  type: String
  derivation_rule: >
	For participants with Status “CURRENT-Continuing” this is current_region,
	else “requested_region_from_form”

- field_name: region_codes
  type: String
  derivation_rule: Used in circle naming. See APPENDIX 2

- field_name: preferred_format
  type: String
  derivation_rule: >
	## We will start with implementing in-person circles only.
	I will write this and other information about virtual formats later

- field_name: existing_circle_meeting_info
  type: Tuple
  derivation_rule: >
	(current_meeting_day_time, current_subregion) for existing circle members

- field_name: max_circle_capacity
  type: Integer
  derivation_rule: >
	For existing circles, based on co_leader_max_new_members and current size
